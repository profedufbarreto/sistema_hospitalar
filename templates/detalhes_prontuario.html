<head>
    <meta charset="UTF-8">
    <title>Detalhes do Prontu√°rio | {{ paciente.nome }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <style>
        .detalhes-container { max-width: 900px; margin: 30px auto; padding: 30px; background: white; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .section-header { margin-top: 30px; padding-bottom: 5px; border-bottom: 2px solid #007bff; color: #007bff; }
        .data-item { margin-bottom: 10px; }
        .data-item strong { display: inline-block; width: 150px; color: #333; }
        
        .prova-vida-list { margin-top: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 6px; }
        .prova-vida-item { border-bottom: 1px dashed #eee; padding: 10px 0; }
        .prova-vida-item:last-child { border-bottom: none; }
        .pv-data { display: flex; flex-wrap: wrap; gap: 15px; font-size: 0.9em; }
        .pv-data span { flex: 1 1 45%; }
        .pv-obs { margin-top: 5px; font-style: italic; color: #6c757d; }
    </style>
</head>
<body>
    <header class="main-header">
        <h2>Prontu√°rio Arquivado: {{ paciente.nome }}</h2>
        <nav>
            <a href="{{ url_for('arquivo') }}" class="btn-logout" style="background-color: #6c757d;">Voltar ao Arquivo</a>
        </nav>
    </header>

    <main class="detalhes-container">
        <h3 class="section-header">Dados do Paciente e Interna√ß√£o</h3>
        <div class="data-item"><strong>Nome:</strong> {{ paciente.nome }}</div>
        <div class="data-item"><strong>Nascimento:</strong> {{ paciente.data_nascimento.strftime('%d/%m/%Y') }}</div>
        <div class="data-item"><strong>Entrada:</strong> {{ paciente.data_entrada.strftime('%d/%m/%Y %H:%M') }}</div>
        <div class="data-item"><strong>Alta (Baixa):</strong> {{ paciente.data_baixa.strftime('%d/%m/%Y') if paciente.data_baixa else 'PENDENTE' }}</div>
        <div class="data-item"><strong>Profissional de Baixa:</strong> {{ paciente.nome_baixa }}</div>
        <div class="data-item"><strong>Endere√ßo:</strong> {{ paciente.endereco }}, {{ paciente.bairro }} (CEP: {{ paciente.cep }})</div>
        <div class="data-item"><strong>Procedimento/Motivo:</strong> {{ paciente.procedimento }}</div>

        <h3 class="section-header" style="border-bottom-color: #28a745;">Hist√≥rico de Provas de Vida ({{ provas_vida | length }} Registros)</h3>
        
        {% if provas_vida %}
        <div class="prova-vida-list">
            {% for pv in provas_vida %}
            <div class="prova-vida-item">
                <div class="pv-data">
                    <span>üìÖ **Data/Hora:** {{ pv.data_hora.strftime('%d/%m/%Y %H:%M') }}</span>
                    <span>üë®‚Äç‚öïÔ∏è **Efetuado por:** {{ pv.quem_efetuou }}</span>
                    <span>ü©∏ **PA:** {{ pv.pressao_arterial }} mmHg</span>
                    <span>‚ù§Ô∏è **FC:** {{ pv.batimentos_cardiacos }} bpm</span>
                    <span>ü¶† **Glicose:** {{ pv.glicose if pv.glicose else 'N/A' }} mg/dL</span>
                    <span>üí® **Satura√ß√£o:** {{ pv.saturacao if pv.saturacao else 'N/A' }} %</span>
                </div>
                {% if pv.observacoes %}
                <p class="pv-obs">‚ö†Ô∏è **Obs:** {{ pv.observacoes }}</p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>Nenhuma prova de vida registrada para este paciente.</p>
        {% endif %}

        <h3 class="section-header" style="border-bottom-color: #ffc107;">Hist√≥rico de Administra√ß√£o de Medicamentos</h3>
        <p>A listagem dos medicamentos administrados precisaria de uma consulta √† tabela `AdministracaoMedicamentos`.</p>
    </main>
</body>
</html>